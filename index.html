<html>
<head>
	<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

	<script type='text/javascript'>

var imageFiles = [
	'1.png',
	'2.png',
	'3.png',
	'4.png',
	'5.png',
	'6.png',
	'7.png',
	'8.png',
	'9.png',
	'10.png',
	'11.png',
	'12.png',
	'13.png',
	'14.png',
	'15.png',
	'16.png',
	'17.png',
	'18.png',
	'19.png',
	'20.png',
	'21.png',
	'22.png',
	'23.png',
	'24.png',
	'25.png',
	'26.png',
	'27.png',
	'28.png',
	'29.png',
	'30.png',
	'31.png',
	'32.png',
	'33.png',
	'34.png',
	'35.png',
	'36.png',
	'37.png',
];

function load() {

	var size = 6;
	var showTitle = false;

	var params = location.search.substring(1).split('&');
	for (var i=0; i<params.length; i++) {
		var keyValue = params[i].split('=');
		if (keyValue[0] === 'size') {
			size = parseInt(keyValue[1]);
		} else if (keyValue[0] === 'title') {
			showTitle = keyValue[1] !== "0";
		}
	}

	var canvas = document.getElementById('canvas');
	var screenX = window.screen.availWidth;
	//var screenY = window.screen.availHeight;

	var screenY = 
		document.body.clientHeight || window.innerHeight || 
		window.screen.availHeight || 
		document.documentElement.clientHeight || document.body.clientHeight || window.screen.height;

	var imgX = screenX / size;
	var imgY = imgX * 9 /16;
	// X is too wide
	if (screenX * 9 > screenY * 16) {
		imgY = screenY / size;
		imgX = imgY * 16 / 9;
	}
	imgX = parseInt(imgX);
	imgY = parseInt(imgY);

	var iterMax = size*size;
	for(var i=0; i<iterMax; i++) {

		// wrapper div
		var div = document.createElement('div');
		div.setAttribute('class', 'wrapper');
		div.setAttribute('style', 'position: relative; margin: 0; padding: 0; float: left;');

		// image
		var img = new Image();
		img.setAttribute('src', 'images/' + imageFiles[i % imageFiles.length]);
		img.setAttribute('class', 'tv-program');
		img.setAttribute('style', 'width: ' + imgX + 'px; height: ' + imgY + 'px;');

		// title
		var titleImg = new Image();
		titleImg.setAttribute('src', 'images/titles/' + imageFiles[i % imageFiles.length]);
		titleImg.setAttribute('class', 'tv-program');
		titleImg.setAttribute('style', 'width: ' + imgX + 'px; bottom: 10px; left: 0; position: absolute;');

		//canvas.appendChild(img);
		div.appendChild(img);
		if (showTitle) {
			div.appendChild(titleImg);
		}
		canvas.appendChild(div);

		if ((i+1)%size === 0) {
			//canvas.innerHTML += '<br>';
			var div = document.createElement('div');
			div.setAttribute('class', 'clear');
			div.setAttribute('style', 'clear: both;');
			canvas.appendChild(div);
		}
	}
}

</script>
</head>

<body style='margin: 0; padding: 0;' onload='load()'>
	<div id='canvas' style='background-color: black;'>
	</div>
</body>
</html>


