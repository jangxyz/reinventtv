<html>
<head>
	<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

	<script type='text/javascript'>

var imageFiles = [
	'images/1.png',
	'images/2.png',
	'images/3.png',
	'images/4.png',
	'images/5.png',
	'images/6.png',
	'images/7.png',
	'images/8.png',
	'images/9.png',
	'images/10.png',
	'images/11.png',
	'images/12.png',
	'images/13.png',
	'images/14.png',
	'images/15.png',
	'images/16.png',
	'images/17.png',
	'images/18.png',
	'images/19.png',
	'images/20.png',
	'images/21.png',
	'images/22.png',
	'images/23.png',
	'images/24.png',
	'images/25.png',
	'images/26.png',
	'images/27.png',
	'images/28.png',
	'images/29.png',
	'images/30.png',
	'images/31.png',
	'images/32.png',
	'images/33.png',
	'images/34.png',
	'images/35.png',
	'images/36.png',
	'images/37.png',
];

function load() {

	var size = 6;
	var params = location.search.substring(1).split('&');
	for (var i=0; i<params.length; i++) {
		if (params[i].split('=')[0] === 'size') {
			size = parseInt(params[i].split('=')[1]);
			break;
		}
	}

	var canvas = document.getElementById('canvas');
	var screenX = window.screen.availWidth;
	//var screenY = window.screen.availHeight;

	var screenY = 
		document.body.clientHeight || window.innerHeight || 
		window.screen.availHeight || 
		document.documentElement.clientHeight || document.body.clientHeight || window.screen.height;

	var imgX = screenX / size;
	var imgY = imgX * 9 /16;
	// X is too wide
	if (screenX * 9 > screenY * 16) {
		imgY = screenY / size;
		imgX = imgY * 16 / 9;
	}
	imgX = parseInt(imgX);
	imgY = parseInt(imgY);

	var iterMax = size*size;
	for(var i=0; i<iterMax; i++) {
		var img = new Image();
		img.setAttribute('src', imageFiles[i % imageFiles.length]);
		img.setAttribute('class', 'tv-program');
		img.setAttribute('style', 'width: ' + imgX + 'px; height: ' + imgY + 'px;');
		canvas.appendChild(img);

		if ((i+1)%size === 0) {
			canvas.innerHTML += '<br>';
		}
	}
}

</script>
</head>

<body style='margin: 0; padding: 0;' onload='load()'>
	<div id='canvas' style='background-color: black;'>
	</div>
</body>
</html>


